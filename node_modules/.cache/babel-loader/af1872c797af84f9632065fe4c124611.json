{"ast":null,"code":"//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nexport default {\n  name: 'DetailGoodsInfo',\n  props: {\n    detailInfo: {\n      type: Object,\n      default: function _default() {\n        return {};\n      }\n    }\n  },\n  filters: {\n    Imgfilter: function Imgfilter(value) {\n      return \"http:\" + value;\n    }\n  },\n  computed: {\n    showImage: function showImage(item) {\n      return \"http:\" + item;\n    }\n  },\n  data: function data() {\n    return {\n      counter: 0,\n      imagesLength: 0,\n      MyTopImages: []\n    };\n  },\n  // 防止详情页内图片加载不完全而导致的better-scroll插件滚动中断\n  methods: {\n    imgLoad: function imgLoad() {\n      //console.log('----');\n      if (++this.counter === this.imagesLength) {\n        //所有图片加载完\n        this.$emit('imageLoad'); //发出事件  进行一次回调就行\n      }\n    }\n  },\n  watch: {\n    detailInfo: function detailInfo() {\n      //获取图片个数\n      this.imagesLength = this.detailInfo.detailImage[0].list.length;\n    }\n  } // methods:{\n  //   imgLoad(){\n  //     //console.log('加载DetailGoodsInfo');\n  //     this.$emit('detailImageLoad');\n  //   }\n  // } ,\n  //  created() {\n  //    if(Object.keys(this.detailInfo).length !== 0){\n  //     this.MyTopImages = this.detailInfo.detailImage[0].list;\n  //     for(let i = 0; i < this.MyTopImages.length; i++){\n  //         this.MyTopImages[i] = \"http:\" + this.MyTopImages[i];\n  //     }\n  //    }\n  //     console.log(this.MyTopImages);\n  // }\n\n};","map":{"version":3,"mappings":";;;;;;;;;;;;;;;AAgBA;AACAA,yBADA;AAEAC;AACAC;AACAC,kBADA;AAEAC,aAFA,sBAEA;AACA;AACA;AAJA;AADA,GAFA;AAWAC;AACAC;AACA;AACA;AAHA,GAXA;AAgBAC;AACAC,aADA,qBACAC,IADA,EACA;AACA;AACA;AAHA,GAhBA;AAqBAC,MArBA,kBAqBA;AACA;AACAC,gBADA;AAEAC,qBAFA;AAGAC;AAHA;AAKA,GA3BA;AA4BA;AACAC;AACAC,WADA,qBACA;AACA;AACA;AAAA;AACA,gCADA,CACA;AACA;AACA;AANA,GA7BA;AAqCAC;AACAd,cADA,wBACA;AACA;AACA;AACA;AAJA,GArCA,CA4CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;;AA3DA","names":["name","props","detailInfo","type","default","filters","Imgfilter","computed","showImage","item","data","counter","imagesLength","MyTopImages","methods","imgLoad","watch"],"sourceRoot":"src/views/detail/childComps","sources":["DetailGoodsInfo.vue"],"sourcesContent":["<template>\n  <div v-if=\"Object.keys(detailInfo).length !== 0\" class=\"goods-info\">\n    <div class=\"info-desc clear-fix\">\n      <div class=\"start\"></div>\n      <div class=\"desc\">{{detailInfo.desc}}</div>\n      <div class=\"end\"></div>\n    </div>\n    <div class=\"info-key\">{{detailInfo.detailImage[0].key}}</div>\n    <div class=\"info-list\">\n      <img v-for=\"(item, index) in detailInfo.detailImage[0].list\"\n      :src=\"item|Imgfilter\" :key=\"index\" alt=\"\" @load=\"imgLoad\"><!--监听图片加载完成-->\n  </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'DetailGoodsInfo',\n  props:{\n    detailInfo:{\n      type: Object,\n      default(){\n        return {};\n      }\n    }\n  },\n\n  filters:{\n    Imgfilter: function(value){\n      return \"http:\" + value\n    }\n  },\n  computed:{\n    showImage(item){\n      return \"http:\" + item;\n    }\n  },\n  data() {\n    return {\n      counter: 0,\n      imagesLength: 0,\n      MyTopImages: [],\n    }\n  },\n  // 防止详情页内图片加载不完全而导致的better-scroll插件滚动中断\n  methods:{\n    imgLoad(){\n      //console.log('----');\n      if(++this.counter === this.imagesLength){//所有图片加载完\n        this.$emit('imageLoad'); //发出事件  进行一次回调就行\n      }\n    }\n  },\n  watch:{\n    detailInfo(){\n      //获取图片个数\n      this.imagesLength = this.detailInfo.detailImage[0].list.length;\n    }\n  }\n\n  // methods:{\n  //   imgLoad(){\n  //     //console.log('加载DetailGoodsInfo');\n  //     this.$emit('detailImageLoad');\n  //   }\n  // } ,\n  //  created() {\n  //    if(Object.keys(this.detailInfo).length !== 0){\n  //     this.MyTopImages = this.detailInfo.detailImage[0].list;\n  //     for(let i = 0; i < this.MyTopImages.length; i++){\n  //         this.MyTopImages[i] = \"http:\" + this.MyTopImages[i];\n  //     }\n  //    }\n\n  //     console.log(this.MyTopImages);\n  // }\n }\n</script>\n\n<style scoped>\n  .goods-info {\n    padding: 20px 0;\n    border-bottom: 5px solid #f2f5f8;\n  }\n\n  .info-desc {\n    padding: 0 15px;\n  }\n\n  .info-desc .start, .info-desc .end {\n    width: 90px;\n    height: 1px;\n    background-color: #a3a3a5;\n    position: relative;\n  }\n\n  .info-desc .start {\n    float: left;\n  }\n\n  .info-desc .end {\n    float: right;\n  }\n\n  .info-desc .start::before, .info-desc .end::after {\n    content: '';\n    position: absolute;\n    width: 5px;\n    height: 5px;\n    background-color: #333;\n    bottom: 0;\n  }\n\n  .info-desc .end::after {\n    right: 0;\n  }\n\n  .info-desc .desc {\n    padding: 15px 0;\n    font-size: 14px;\n  }\n\n  .info-key {\n    margin: 10px 0 10px 15px;\n    color: #333;\n    font-size: 15px;\n  }\n\n  .info-list img {\n    width: 100%;\n  }\n</style>\n"]},"metadata":{},"sourceType":"module"}