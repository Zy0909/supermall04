{"ast":null,"code":"import \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.array.find.js\";\nimport { ADD_COUNTER, ADD_TO_CART } from './mutations-type';\nvar actions = {\n  addCart: function addCart(context, payload) {\n    //dispatch返回一个promise,传入resolve\n    return new Promise(function (resolve, reject) {\n      //1.查找之前数组中是否有该商品  通过context判断\n      var oldProduct = context.state.cartList.find(function (item) {\n        return item.iid === payload.iid;\n      }); //2.判断oldProduct是否有值\n\n      if (oldProduct) {\n        // oldProduct.count+=1\n        context.commit(ADD_COUNTER, oldProduct);\n        resolve('当前商品数量+1');\n      } else {\n        payload.count = 1;\n        context.commit(ADD_TO_CART, payload);\n        resolve('添加了新的商品');\n      }\n    });\n  }\n};\nexport default actions;","map":{"version":3,"sources":["D:/桌面/文件/前端/vue/9.supermall/supermall1/src/store/actions.js"],"names":["ADD_COUNTER","ADD_TO_CART","actions","addCart","context","payload","Promise","resolve","reject","oldProduct","state","cartList","find","item","iid","commit","count"],"mappings":";;AAAA,SACEA,WADF,EAEEC,WAFF,QAGO,kBAHP;AAKA,IAAMC,OAAO,GAAG;AACdC,EAAAA,OADc,mBACNC,OADM,EACGC,OADH,EACY;AACxB;AACA,WAAO,IAAIC,OAAJ,CAAY,UAACC,OAAD,EAASC,MAAT,EAAoB;AACrC;AACA,UAAIC,UAAU,GAAGL,OAAO,CAACM,KAAR,CAAcC,QAAd,CAAuBC,IAAvB,CAA4B,UAAAC,IAAI;AAAA,eAC/CA,IAAI,CAACC,GAAL,KAAaT,OAAO,CAACS,GAD0B;AAAA,OAAhC,CAAjB,CAFqC,CAIrC;;AACA,UAAIL,UAAJ,EAAe;AACb;AACAL,QAAAA,OAAO,CAACW,MAAR,CAAef,WAAf,EAA2BS,UAA3B;AACAF,QAAAA,OAAO,CAAC,UAAD,CAAP;AACD,OAJD,MAIM;AACJF,QAAAA,OAAO,CAACW,KAAR,GAAgB,CAAhB;AACAZ,QAAAA,OAAO,CAACW,MAAR,CAAed,WAAf,EAA2BI,OAA3B;AACAE,QAAAA,OAAO,CAAC,SAAD,CAAP;AACD;AACF,KAdM,CAAP;AAgBC;AAnBW,CAAhB;AAsBA,eAAeL,OAAf","sourcesContent":["import {\n  ADD_COUNTER,\n  ADD_TO_CART\n} from './mutations-type'\n\nconst actions = {\n  addCart(context, payload) {\n    //dispatch返回一个promise,传入resolve\n    return new Promise((resolve,reject) => {\n      //1.查找之前数组中是否有该商品  通过context判断\n      let oldProduct = context.state.cartList.find(item =>\n        item.iid === payload.iid )\n      //2.判断oldProduct是否有值\n      if (oldProduct){\n        // oldProduct.count+=1\n        context.commit(ADD_COUNTER,oldProduct);\n        resolve('当前商品数量+1')\n      }else {\n        payload.count = 1\n        context.commit(ADD_TO_CART,payload);\n        resolve('添加了新的商品');\n      }\n    })\n\n    }\n  }\n\nexport default actions\n"]},"metadata":{},"sourceType":"module"}